{% extends 'base.html' %}
{% load i18n %}

{% block head %}
    {{ wizard.form.media }}
{% endblock %}

{% block content %}
    <h1>{% trans "Enable Two-Factor Authentication" %}</h1>
    {% if wizard.steps.current == 'welcome' %}
        <p>{% blocktrans %}You are about to take your account security to the
            next level. Follow the steps in this wizard to enable two-factor
            authentication.{% endblocktrans %}</p>
    {% elif wizard.steps.current == 'method' %}
        <p>{% blocktrans %}Please select which authentication method you would
            like to use.{% endblocktrans %}</p>
    {% elif wizard.steps.current == 'generator' %}
        <p>{% blocktrans %}To start using a token generator (like Google
            Authenticator), use your smartphone to scan the QR code, or manually
            enter the code below. Then, enter the token generated by the app. 
            {% endblocktrans %}</p>
        <p><img src="{{ qr_url }}" alt="QR Code" /></p>
        <p>{% blocktrans %}Code: {{ seed }}{% endblocktrans %}</p>
    {% elif wizard.steps.current == 'backup' %}
        <p>{% blocktrans %}We recommend entering a backup phone number to that
            can receive codes via text message. This number will be validated
            in the next step (or press next to skip).{% endblocktrans %}</p>
    {% elif wizard.steps.current == 'sms' %}
        <p>{% blocktrans %}Please enter the phone number you wish to receive
            the text messages on. This number will be validated in the next
            step.{% endblocktrans %}</p>
    {% elif wizard.steps.current == 'sms-verify' or  wizard.steps.current == 'backup-verify' %}
        <p>{% blocktrans %}A text message has been sent, please enter the
            authentication code displayed on your phone.{% endblocktrans %}</p>
    {% elif wizard.steps.current == 'call' %}
        <p>{% blocktrans %}Please enter the phone number you wish to be called
            on. This number will be validated in the next step.
            {% endblocktrans %}</p>
    {% endif %}

    <form action="" method="post">{% csrf_token %}
        <table>
            {{ wizard.management_form }}
            {% if wizard.form.forms %}
                {{ wizard.form.management_form }}
                {% for form in wizard.form.forms %}
                    {{ form }}
                {% endfor %}
            {% else %}
                {{ wizard.form }}
            {% endif %}
        </table>

        {# hidden submit button to enable [enter] key #}
        <div style="margin-left: -500px"><input type="submit" value=""/></div>

        {% if wizard.steps.prev %}
            <button name="wizard_goto_step" type="submit"
                    value="{{ wizard.steps.prev }}">{% trans "Back" %}</button>
        {% endif %}
        <button type="submit">{% trans "Next" %}</button>
    </form>
{% endblock %}
